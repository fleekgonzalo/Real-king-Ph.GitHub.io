---
tags: blog
categories: misc
title: teXtä¸»é¢˜ä¸‹-keyçš„é‡è®¾&leancloudè½¬å›½é™…ç‰ˆ
---

## Key çš„é‡è®¾

### ç”±æ¥

ç”±äºé•¿æ—¶é—´æ²¡æœ‰è¿›è¡Œæ›´æ–°åšå®¢ï¼Œå¹¶ä¸”æ‰“ç®—è¿ç§»ä¸€ä¸‹è¿‘æœŸé¢˜è§£ï¼Œæ‰€ä»¥æˆ‘æ›´æ”¹ä»¥å‰çš„åšå®¢ï¼Œäºæ˜¯ä¹ç°åœ¨çš„æ ·å­å°±æ˜¯æœ€ç»ˆçš„ç»“æœã€‚

åœ¨é…ç½®çš„æ—¶å€™æˆ‘æ›¾é‡åˆ°è¿‡å‡ ä¸ªä¸å¤ªå¥½ç”¨çš„åœ°æ–¹ï¼Œå…¶ä¸­æœ€çªå‡ºçš„å°±æ˜¯å®ƒæ‰€ä½¿ç”¨çš„è¯„è®ºç³»ç»Ÿä¸è®¿é—®é‡çš„è®¾ç½®ã€‚

æŒ‰ç…§ä½œè€…çš„è®¾ç½®ï¼Œæˆ‘ä»¬æˆåŠŸè®¾ç½®äº†è¿™äº›ä¸œè¥¿ã€‚

ä¸è¿‡ä½œè€…æ”¾åœ¨æ–‡æ¡£ä¸­çš„æ–¹æ³•ä¼¼ä¹æœ‰äº›ä¸å¤ªå¥½ç”¨ã€‚

![image-20220405180351407](https://s2.loli.net/2022/04/05/zl1xQ4U7Z8TRI6v.png)

è€Œ `key` çš„å€¼å¦‚ä¸‹

![image-20220405180619954](https://s2.loli.net/2022/04/05/wkgWZGA6FT5qiBv.png)

å¦‚æœæ¯ç¯‡æ–‡ç« éƒ½éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è®¾ç½®çš„è¯é‚£ä¹ˆå¯¹æˆ‘ä»¬æ¥è¯´ï¼Œç‰¹åˆ«æ˜¯æ‰¹é‡å¯¼å…¥çš„äººæ¥è¯´ï¼Œè¿™æ˜¯æä¸ºä¸æ–¹ä¾¿çš„ã€‚

### ä¿®æ”¹

æˆ‘ä»¬ä¸å¦¨æ ¹æ® `jekyll` ç½‘ç«™çš„ç”Ÿæˆè§„åˆ™è‡ªå·±å®šä¹‰ä¸€ä¸ªå¯èƒ½ä¸éšç€åšå®¢çš„æ”¹å˜çš„ `key` 

é¦–å…ˆå”¯ä¸€ç¡®å®šçš„ä¸œè¥¿æœ‰å“ªäº›å‘¢ï¼Ÿ

æˆ‘ä»¬è€ƒè™‘ç½‘å€ï¼Œå¯¹äºæˆ‘ä»¬çš„åšå®¢æ¥è¯´ï¼Œå®ƒæ˜¯å”¯ä¸€çš„ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªé‡å¤çš„åœ°å€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†æ— æ³•å®šä¹‰è¯¥é¡µé¢æ˜¾ç¤ºçš„ä¸œè¥¿æ˜¯ä»€ä¹ˆã€‚

é‚£ä¹ˆå› æ­¤ï¼Œæˆ‘ä»¬ä¸å¦¨ç”¨ç½‘ç«™çš„ `url` å»ä»£æ›¿å¯¹åº”çš„ `key` ã€‚

äºæ˜¯æˆ‘ä»¬å¼€å§‹ç€æ‰‹å¯»æ‰¾ï¼Œå¯¹äºåŸæ¥çš„ä»“åº“ï¼Œæˆ‘ä»¬å¯ä»¥å®šä½åˆ°å¦‚ä¸‹å‡ ä¸ªç”¨åˆ°é¡µé¢ä¸Šçš„ `key` çš„åœ°æ–¹ã€‚

1. [jekyll-TeXt-theme/post.html](https://github.com/kitian616/jekyll-TeXt-theme/blob/master/_includes/pageview-providers/leancloud/post.html#L8)
2. [jekyll-TeXt-theme/post.html](https://github.com/kitian616/jekyll-TeXt-theme/blob/master/_includes/pageview-providers/leancloud/post.html#L23)
3. [jekyll-TeXt-theme/post.html](https://github.com/kitian616/jekyll-TeXt-theme/blob/master/_includes/pageview-providers/leancloud/post.html#L26)
3. [jekyll-TeXt-theme/article-info.html](https://github.com/kitian616/jekyll-TeXt-theme/blob/master/_includes/article-info.html#L74)

æˆ‘ä»¬å°†ä¸Šé¢å‡ºç°çš„ `page.key` å…¨éƒ¨æ›´æ¢ä¸º `page.url` ä¸ºäº†ç¬¦åˆè§„åˆ™æˆ‘åšäº†ä¸€ç‚¹ç‚¹çš„åˆ«çš„æ”¹å˜.

å°†ä¸Šé¢ä¸¤ä¸ªç½‘å€ä¸­ï¼Œè‡ªå·±ä»“åº“ä¸­ç›¸åº”ä½ç½®çš„æ–‡ä»¶ä¿®æ”¹è¿‡æ¥å³å¯ã€‚

[Real-king-Ph.GitHub.io/post.html](https://github.com/Real-king-Ph/Real-king-Ph.GitHub.io/blob/master/_includes/pageview-providers/leancloud/post.html) è¿™ä¸ªæ–‡ä»¶è¦†ç›–å³å¯ï¼Œå¦‚æœä¿®æ”¹è¿‡å¯ä»¥ç”¨[æ–‡æœ¬å¯¹æ¯”](https://kmcha.com/text-compare)æŸ¥çœ‹ã€‚

å¦å¤–ä¸€ä¸ªç”±äºæˆ‘å·²ç»è½¬ç§»è‡³ [waline](https://waline.js.org/)ï¼Œå› æ­¤æä¾›ä¸‹é¢çš„è§£å†³åŠæ³•ã€‚

{% raw %}

```text
_includes/article-info.html :
	L74 { { include.article.key } } --> {{ include.article.url | replace:'/' ,'s'}}
```

{% endraw %}  


å¦‚æœä¸äº†è§£äº§ç”Ÿäº†ä»€ä¹ˆå˜åŒ–ï¼Œå¯ä»¥å‚è€ƒ[LIQUIDæ–‡æ¡£](https://liquid.bootcss.com/filters/replace/)

ç„¶åæˆ‘ä»¬å†æ¬¡åˆ·æ–°ï¼Œæˆ‘ä»¬çš„è®¿é—®é‡å°±æœ‰å˜åŒ–äº†ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½œè€…è‡ªå·±å†™äº†ä¸€ä¸ª`LazyLoad`ã€‚å› æ­¤ï¼Œè®¿é—®é‡éœ€è¦åŠ è½½ä¸€ä¸‹æ‰è¡Œã€‚

## leancloudè½¬è‡³å›½é™…ç‰ˆ

### ç”±æ¥

[æœªåŠç†å¤‡æ¡ˆæ¥å…¥çš„åŸŸåå°†äº 4 æœˆé™åˆ¶è®¿é—® - æ–°é—»å…¬å‘Š - LeanCloud ç”¨æˆ·ç¤¾åŒº](https://forum.leancloud.cn/t/topic/25129)

ç”±äºæˆ‘å¹¶æ²¡æœ‰ä»»ä½•çš„ ip ï¼Œå¹¶ä¸”çŸ­æœŸå†…ä¸æ‰“ç®—å»è®¾ç½®ç‹¬ç«‹ipå¹¶å¤‡æ¡ˆã€‚

å› æ­¤æˆ‘ä¸å¾—ä¸å°† leancloud è½¬ç§»è‡³å›½é™…ç‰ˆã€‚

ä¸ºæ­¤æˆ‘æŸ¥é˜…äº†ä¸€äº›åšå®¢ï¼Œå‘ç°å¤§å¤šæ•°çš„è§£å†³æ–¹æ¡ˆéƒ½æ˜¯åœ¨ `hexo` çš„åšå®¢æ¡†æ¶ä¸Šçš„ï¼Œè€Œä¸”å¾ˆå¤§ä¸€éƒ¨åˆ†è¿˜éƒ½æ˜¯ç‰¹å®šçš„ä¸»é¢˜ `NexT` ã€‚æ‰€ä»¥æ‰“ç®—è®°å½•ä¸€ä¸‹è¯¥å¦‚ä½•æ”¹å˜ã€‚

### æ“ä½œ

é¦–å…ˆç¬¬ä¸€æ­¥ï¼Œåœ¨leancloudçš„å·¦ä¸Šè§’ï¼Œæˆ‘ä»¬å°†ååŒ—/ä¸œçš„æ”¹ä¸ºå›½é™…ç‰ˆ

![leancloud_left_up](https://s2.loli.net/2022/04/05/XrYPo2UcSnCTiEm.png)

ç„¶åæˆ‘ä»¬é‡æ–°æ³¨å†Œä¸€ä¸ªè´¦æˆ·(ä¸åŒåœ°åŒºè´¦å·ä¸äº’é€š)ï¼Œé‡æ–°æŒ‰ç…§æ–‡æ¡£çš„æ­¥éª¤è¿›è¡Œè®¾ç½®ã€‚

é¦–å…ˆæ ¹æ®githubä¸­çš„ [issue](https://github.com/xCss/Valine/issues/340) æˆ‘ä»¬å‘ç°æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸‹è¿°çš„è®¾ç½®



{% highlight yml linenos %}

serverURLs: https://xxxxxxxx.api.lncldglobal.com # æŠŠxxxxxxxxæ›¿æ¢æˆä½ è‡ªå·±AppIDçš„å‰8ä½å­—ç¬¦

{% endhighlight %}

æˆ‘ä»¬è¿›å…¥leancloudä¸­ç„¶åè¿›å…¥ä¸‹è¿°çš„é¡µé¢

![image-20220405183326155](https://s2.loli.net/2022/04/05/WmN4pBMeLHCykhV.png)

ç„¶åæˆ‘ä»¬åœ¨**æœåŠ¡å™¨åœ°å€**ä¸­å°±å¯ä»¥æ‰¾åˆ°è¿™ä¸ªè®¾ç½®äº†

ç„¶åæˆ‘ä»¬åœ¨ `valine` çš„[å®˜æ–¹æ‰‹å†Œ](https://valine.js.org/configuration.html)ä¸­æˆ‘ä»¬å‘ç°é…ç½®çš„åŸºæœ¬æ–¹æ³•ã€‚

é¦–å…ˆæˆ‘ä»¬æœ‰



{% highlight html linones %}


<!-- æ–¹æ³• 1 -->
<script>
    new Valine({
        el:'#vcomment',
        appId: 'Your appId',
        appKey: 'Your appKey'
    })
</script>

<!-- æ–¹æ³• 2 -->
<script>
    var valine = new Valine();
    valine.init({
        el:'#vcomment',
        appId: 'Your appId',
        appKey: 'Your appKey'
    })
</script>


{% endhighlight %}

æˆ‘ä»¬å¼€å§‹ç€æ‰‹å»å¯»æ‰¾ï¼Œæˆ‘ä»¬çš„ä¸»é¢˜åœ¨å“ªä¸ªåœ°æ–¹ä½¿ç”¨äº†ç±»ä¼¼çš„ä¸œè¥¿ã€‚

[jekyll-TeXt-theme/valine.html](https://github.com/kitian616/jekyll-TeXt-theme/blob/master/_includes/comments-providers/valine.html#L42)

æˆ‘ä»¬å‘ç°ä¿¡æ¯æ°å¥½å°±åœ¨ `_config` ä¸­ï¼Œç„¶åæˆ‘ä»¬å°†æˆ‘ä»¬ä¸Šé¢å¾—åˆ°çš„ä¸œè¥¿æ·»åŠ è¿›å»ã€‚

{% highlight javascript %}
var _config = {
    el: '#vcomments' , 
    ...
    serverURLs: 'https://xxxxxxxx.api.lncldglobal.com'
}
{% endhighlight %}

ç„¶åæˆ‘ä»¬å†æ¬¡åˆ·æ–°å°±å¯ä»¥ç”¨å›½é™…ç‰ˆè¿›è¡Œ `comment` äº†

å…¶ä¸­å‚æ•°ç”¨æ³•[å‚é˜…](https://valine.js.org/configuration.html#serverURLs)

å¯¹äºå¦‚ä½•æ”¹å˜viewer æˆ‘ä»¬ä¹Ÿç”¨åŒæ ·çš„æ–¹æ³•ã€‚

è¿™ä¸ªviewerå¯èƒ½æ˜¯ä¸»é¢˜ä½œè€…å†™çš„ï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶æ–‡ä»¶ä¸­æœç´¢æˆ‘ä»¬çš„å‚æ•° `serverURLs` 

[jekyll-TeXt-theme/leancloud.js](https://github.com/kitian616/jekyll-TeXt-theme/blob/master/_includes/pageview-providers/leancloud/leancloud.js#L16)

åœ¨è¿™ä¸ªåœ°æ–¹æˆ‘ä»¬ä¹Ÿæ”¹ä¸ºæˆ‘ä»¬éœ€è¦çš„åœ°å€å³å¯ã€‚

è‡³æ­¤æˆ‘ä»¬çš„ä¿®æ”¹å°±å·²ç»å®Œæˆäº†ã€‚

æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥åæ˜ åœ¨è¯„è®ºåŒºå“¦ğŸ˜˜ã€‚





